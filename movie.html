<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Profile</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/movie.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- External Scripts -->
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="http://www.w3schools.com/lib/w3data.js"></script>

    <!-- Local Scripts -->
    <script src="js/methods.js"></script>

	<script type="text/javascript">
		$(document).ready(function() {
			checkForUser();

			var id = getUrlParameter("params");
			searchById(id, function(result) {
				movie = result;
				if (movie != null) {
					setDisplay(movie);
				}
				else {
					$("#movieName").text("Movie Not Found");
				}
			})
		});

		function setDisplay(movie) {
			$("#movieName").text(movie.title);
			var imgSrc = getPosterImgSrc(movie, "w92");
			$("#img").append("<img src='" + imgSrc + "'' alt='' height='90'></img> &nbsp;&nbsp;");
		}

		function newReview() {
			var rating = $("#rate").val();
			var thoughts = $("#thoughts").val();
			$.post("php/new-review.php", {score: rating, comment: thoughts, movieId: movie.id}, function(data) {
				console.log(data);
				$("#rating").text(rating);
			})
		}
	</script>
  </head>
  <body>

  	<!--Nav Bar-->
    <div w3-include-html="partials/navbar.html"></div>

	<div class="container">
		<!-- Header -->
		<div class="page-header">
		  	<h3><div id="img" style="display:inline"></div><div style="display:inline" id="movieName"></div></h3>
		</div>

		<!-- Left Column: General Movie info -->
		<div class="col-md-4">
			<p id="genre">Genre: </p>
			<p id="followerRating">Rating: </p>
			<p id="followerEntertainment">Entertainment Value: </p>
			<p id="followerEducation">Education Value: </p>
			<p id="followerMood">Average Mood: </p>
		</div>

		<!-- Right Column: Your Movie info -->
		<div class="col-md-8">
				<button type="button" class="btn btn-primary btn-circle btn-xl" id="MyRating">8.8</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<button type="button" class="btn btn-danger btn-circle btn-lg" id="MyEntertainment"><i class="glyphicon glyphicon-fire"></i></button>&nbsp;&nbsp;
				<button type="button" class="btn btn-success btn-circle btn-lg" id="MyEducation"><i class="glyphicon glyphicon-education"></i></button>&nbsp;&nbsp;
				<button type="button" class="btn btn-info btn-circle btn-lg" id="MyMood"><i class="glyphicon glyphicon-fire"></i></button><br>

		</div>

		<!-- Inputs -->
		<!-- <div class="form-group">
		  <input type="text" class="form-control" id="rate" placeholder="Rating" />
		</div>
		<div class="form-group">
		  <textarea class="form-control" rows="4" id="thoughts" placeholder="Thoughts..." /></textarea>
		</div>
		<button class="btn btn-success" onclick="newReview()">Update</button> -->
	</div>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script>
		//Global variables
		var movie = {};

		//Include Partials
      	w3IncludeHTML();
    </script>
  </body>
</html>